const t=function(t){const e=new p;for(const[r,n]of t.entries())e.set(n,r);return e};var e=Object.freeze({__proto__:null,inverse:t});const r=(t,e)=>{let r=!1;for(let n=0;n<e.length;++n)if(-1!==t.indexOf(e.charAt(n))){r=!0;break}if(!r)return String(t);let n="";for(let r=0;r<t.length;++r)-1!==e.indexOf(t.charAt(r))&&(n+="\\"),n+=t.charAt(r);return n},n=function(t,e){const r=[];function n(t){t&&(r.length&&"string"===r[r.length-1].type?r[r.length-1].value+=t:r.push({type:"string",value:t}))}function o(t,e,n){r.push({type:"specifier",specifier:t,precision:e,substitutionIndex:n,value:void 0})}function i(t){const e=["black","red","green","yellow","blue","magenta","cyan","lightGray","","default"],n=["darkGray","lightRed","lightGreen","lightYellow","lightBlue","lightMagenta","lightCyan","white",""],o={color:e,colorLight:n,bgColor:e,bgColorLight:n},i={3:"color",9:"colorLight",4:"bgColor",10:"bgColorLight"}[Math.floor(t/10)];if(!i)return;const s=o[i][t%10];s&&r.push({type:"specifier",specifier:"c",value:{description:(i.startsWith("bg")?"background : ":"color: ")+s},precision:void 0,substitutionIndex:void 0})}let s=0,u=0;const l=new RegExp(`%%|%(?:(\\d+)\\$)?(?:\\.(\\d*))?([${Object.keys(e).join("")}])|\\u001b\\[(\\d+)m`,"g");for(let e=l.exec(t);null!==e;e=l.exec(t)){const r=e.index;if(r>s&&n(t.substring(s,r)),"%%"===e[0])n("%");else if(e[0].startsWith("%")){const[,t,r,n]=e;t&&Number(t)>0&&(u=Number(t)-1);o(n,r?Number(r):-1,u),++u}else{i(Number(e[4]))}s=r+e[0].length}return n(t.substring(s)),r},o=function(t,e,r,o,i,s){if(!t||(!e||!e.length)&&-1===t.search(/\u001b\[(\d+)m/))return{formattedResult:i(o,t),unusedSubstitutions:e};function u(){return'String.format("'+t+'", "'+Array.prototype.join.call(e,'", "')+'")'}function l(t){console.error(u()+": "+t)}let a=o;const c=s||n(t,r),f={},p=e||[];for(const t of c){if("string"===t.type){a=i(a,t.value);continue}if("specifier"!==t.type){l('Unknown token type "'+t.type+'" found.');continue}if(!t.value&&void 0!==t.substitutionIndex&&t.substitutionIndex>=p.length){l("not enough substitution arguments. Had "+p.length+" but needed "+(t.substitutionIndex+1)+", so substitution was skipped."),a=i(a,"%"+(void 0!==t.precision&&t.precision>-1?t.precision:"")+t.specifier);continue}if(t.value||void 0===t.substitutionIndex||(f[t.substitutionIndex]=!0),void 0===t.specifier||!(t.specifier in r)){g="unsupported format character “"+t.specifier+"”. Treating as a string.",console.warn(u()+": "+g);a=i(a,t.value||void 0===t.substitutionIndex?"":String(p[t.substitutionIndex]));continue}a=i(a,(0,r[t.specifier])(t.value||(void 0!==t.substitutionIndex?p[t.substitutionIndex]:void 0),t))}var g;const h=[];for(let t=0;t<p.length;++t)t in f||h.push(p[t]);return{formattedResult:a,unusedSubstitutions:h}},i={d:function(t){return isNaN(t)?0:t},f:function(t,e){t&&"number"==typeof t&&void 0!==e.precision&&e.precision>-1&&(t=t.toFixed(e.precision));const r=void 0!==e.precision&&e.precision>-1?Number(0).toFixed(e.precision):"0";return isNaN(t)?r:t},s:function(t){return t}},s=function(t,e){return o(t,e,i,"",((t,e)=>t+e)).formattedResult},u=function(t,...e){return s(t,e)},l=(t,e)=>{const r=[];let n=t.indexOf(e);for(;-1!==n;)r.push(n),n=t.indexOf(e,n+e.length);return r},a=function(){return"^[]{}()\\.^$*+?|-,"},c=function(t,e){return(t=t.toUpperCase())===(e=e.toUpperCase())?0:t>e?1:-1};var f=Object.freeze({__proto__:null,escapeCharacters:r,tokenizeFormatString:n,format:o,standardFormatters:i,vsprintf:s,sprintf:u,toBase64:t=>{function e(t){return t<26?t+65:t<52?t+71:t<62?t-4:62===t?43:63===t?47:65}const r=(new TextEncoder).encode(t.toString()),n=r.length;let o,i="";if(0===n)return i;let s=0;for(let t=0;t<n;t++)o=t%3,s|=r[t]<<(16>>>o&24),2===o&&(i+=String.fromCharCode(e(s>>>18&63),e(s>>>12&63),e(s>>>6&63),e(63&s)),s=0);return 0===o?i+=String.fromCharCode(e(s>>>18&63),e(s>>>12&63),61,61):1===o&&(i+=String.fromCharCode(e(s>>>18&63),e(s>>>12&63),e(s>>>6&63),61)),i},findIndexesOfSubString:l,findLineEndingIndexes:t=>{const e=l(t,"\n");return e.push(t.length),e},isWhitespace:t=>/^\s*$/.test(t),trimURL:(t,e)=>{let r=t.replace(/^(https|http|file):\/\//i,"");return e&&r.toLowerCase().startsWith(e.toLowerCase())&&(r=r.substr(e.length)),r},collapseWhitespace:t=>t.replace(/[\s\xA0]+/g," "),reverse:t=>t.split("").reverse().join(""),replaceControlCharacters:t=>t.replace(/[\0-\x08\x0B\f\x0E-\x1F\x80-\x9F]/g,"�"),countWtf8Bytes:t=>{let e=0;for(let r=0;r<t.length;r++){const n=t.charCodeAt(r);if(n<=127)e++;else if(n<=2047)e+=2;else if(n<55296||57343<n)e+=3;else{if(n<=56319&&r+1<t.length){const n=t.charCodeAt(r+1);if(56320<=n&&n<=57343){e+=4,r++;continue}}e+=3}}return e},stripLineBreaks:t=>t.replace(/(\r)?\n/g,""),toTitleCase:t=>t.substring(0,1).toUpperCase()+t.substring(1),removeURLFragment:t=>{const e=new URL(t);return e.hash="",e.toString()},regexSpecialCharacters:a,filterRegex:function(t){const e="^[]{}()\\.^$*+?|-,";let r="";for(let n=0;n<t.length;++n){let o=t.charAt(n);-1!==e.indexOf(o)&&(o="\\"+o),n&&(r+="[^\\0"+o+"]*"),r+=o}return new RegExp(r,"i")},createSearchRegex:function(t,e,r){const n=e?"g":"gi";let o;if(r)try{o=new RegExp(t,n)}catch(t){}return o||(o=self.createPlainTextSearchRegex(t,n)),o},caseInsensetiveComparator:c,hashCode:function(t){if(!t)return 0;const e=4294967291;let r=0,n=1;for(let o=0;o<t.length;o++){r=(r+n*(1506996573*t.charCodeAt(o)))%e,n=1345575271*n%e}return r=(r+n*(e-1))%e,Math.abs(0|r)},compare:(t,e)=>t>e?1:t<e?-1:0});String.sprintf=u,String.regexSpecialCharacters=a,String.caseInsensetiveComparator=c,String.prototype.escapeForRegExp=function(){return r(this,"^[]{}()\\.^$*+?|-,")},String.prototype.trimMiddle=function(t){if(this.length<=t)return String(this);let e=t>>1,r=t-e-1;return this.codePointAt(this.length-r-1)>=65536&&(--r,++e),e>0&&this.codePointAt(e-1)>=65536&&--e,this.substr(0,e)+"…"+this.substr(this.length-r,r)},String.prototype.trimEndWithMaxLength=function(t){return this.length<=t?String(this):this.substr(0,t-1)+"…"},String.naturalOrderComparator=function(t,e){const r=/^\d+|^\D+/;let n,o,i,s;for(;;){if(!t)return e?-1:0;if(!e)return 1;if(n=t.match(r)[0],o=e.match(r)[0],i=!Number.isNaN(Number(n)),s=!Number.isNaN(Number(o)),i&&!s)return-1;if(s&&!i)return 1;if(i&&s){const t=Number(n)-Number(o);if(t)return t;if(n.length!==o.length)return Number(n)||Number(o)?o.length-n.length:n.length-o.length}else if(n!==o)return n<o?-1:1;t=t.substring(n.length),e=e.substring(o.length)}},Object.defineProperty(Array.prototype,"lowerBound",{value:function(t,e,r,n){e=e||function(t,e){return t<e?-1:t>e?1:0};let o=r||0,i=void 0!==n?n:this.length;for(;o<i;){const r=o+i>>1;e(t,this[r])>0?o=r+1:i=r}return i},configurable:!0}),Object.defineProperty(Array.prototype,"upperBound",{value:function(t,e,r,n){e=e||function(t,e){return t<e?-1:t>e?1:0};let o=r||0,i=void 0!==n?n:this.length;for(;o<i;){const r=o+i>>1;e(t,this[r])>=0?o=r+1:i=r}return i},configurable:!0}),Object.defineProperty(Uint32Array.prototype,"lowerBound",{value:Array.prototype.lowerBound,configurable:!0}),Object.defineProperty(Uint32Array.prototype,"upperBound",{value:Array.prototype.upperBound,configurable:!0}),Object.defineProperty(Int32Array.prototype,"lowerBound",{value:Array.prototype.lowerBound,configurable:!0}),Object.defineProperty(Int32Array.prototype,"upperBound",{value:Array.prototype.upperBound,configurable:!0}),Object.defineProperty(Float64Array.prototype,"lowerBound",{value:Array.prototype.lowerBound,configurable:!0}),self.createPlainTextSearchRegex=function(t,e){let r="";for(let e=0;e<t.length;++e){const n=t.charAt(e);-1!=="^[]{}()\\.^$*+?|-,".indexOf(n)&&(r+="\\"),r+=n}return new RegExp(r,e||"")},Map.prototype.inverse=function(){return t(this)};class p{constructor(){this._map=new Map}set(t,e){let r=this._map.get(t);r||(r=new Set,this._map.set(t,r)),r.add(e)}get(t){return this._map.get(t)||new Set}has(t){return this._map.has(t)}hasValue(t,e){const r=this._map.get(t);return!!r&&r.has(e)}get size(){return this._map.size}delete(t,e){const r=this.get(t);if(!r)return!1;const n=r.delete(e);return r.size||this._map.delete(t),n}deleteAll(t){this._map.delete(t)}keysArray(){return[...this._map.keys()]}valuesArray(){const t=[];for(const e of this._map.values())t.push(...e.values());return t}clear(){this._map.clear()}}function g(t){"complete"===document.readyState||"interactive"===document.readyState?t():window.addEventListener("DOMContentLoaded",(function e(){window.removeEventListener("DOMContentLoaded",e,!1),t()}),!1)}function h(t,e){throw new Error(e)}self.base64ToSize=function(t){if(!t)return 0;let e=3*t.length/4;return"="===t[t.length-1]&&e--,t.length>1&&"="===t[t.length-2]&&e--,e},self.Platform=self.Platform||{},Platform=Platform||{},Platform.Multimap=p;function d(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function b(t,e,r,n,o,i){if(n<=r)return;const s=function(t,e,r,n,o){const i=t[o];d(t,n,o);let s=r;for(let o=r;o<n;++o)e(t[o],i)<0&&(d(t,s,o),++s);return d(t,n,s),s}(t,e,r,n,Math.floor(Math.random()*(n-r))+r);o<s&&b(t,e,r,s-1,o,i),s<i&&b(t,e,s+1,n,o,i)}function m(t,e,r,n){const o=[];let i=0,s=0;for(;i<t.length&&s<e.length;){const u=r(t[i],e[s]);!n&&u||o.push(u<=0?t[i]:e[s]),u<=0&&i++,u>=0&&s++}if(n){for(;i<t.length;)o.push(t[i++]);for(;s<e.length;)o.push(e[s++])}return o}var y=Object.freeze({__proto__:null,removeElement:(t,e,r)=>{let n=t.indexOf(e);if(-1===n)return!1;if(r)return t.splice(n,1),!0;for(let r=n+1,o=t.length;r<o;++r)t[r]!==e&&(t[n++]=t[r]);return t.length=n,!0},sortRange:function(t,e,r,n,o,i){return 0===r&&n===t.length-1&&0===o&&i>=n?t.sort(e):b(t,e,r,n,o,i),t},binaryIndexOf:(t,e,r)=>{const n=t.lowerBound(e,r);return n<t.length&&0===r(e,t[n])?n:-1},intersectOrdered:(t,e,r)=>m(t,e,r,!1),mergeOrdered:(t,e,r)=>m(t,e,r,!0)});var v=Object.freeze({__proto__:null,isValid:t=>!isNaN(t.getTime()),toISO8601Compact:t=>{function e(t){return(t>9?"":"0")+t}return t.getFullYear()+e(t.getMonth()+1)+e(t.getDate())+"T"+e(t.getHours())+e(t.getMinutes())+e(t.getSeconds())}});function x(t,...e){return s(t,Array.prototype.slice.call(arguments,1))}function S(t){return t}const _=new WeakMap;var w=Object.freeze({__proto__:null,UIString:x,serializeUIString:function(t,e=[]){const r={messageParts:[t],values:e};return JSON.stringify(r)},deserializeUIString:function(t){return t?JSON.parse(t):{}},localize:S,UIStringFormat:class{constructor(t){this.localizedFormat=t,this.tokenizedFormat=n(this.localizedFormat,i)}format(...t){return o(this.localizedFormat,arguments,i,"",((t,e)=>t+e),this.tokenizedFormat).formattedResult}},ls:function(t,...e){if("string"==typeof t)return t;let r=_.get(t);return r||(r=t.join("%s"),_.set(t,r)),x(r,...e)}});var N=Object.freeze({__proto__:null,clamp:(t,e,r)=>{let n=t;return t<e?n=e:t>r&&(n=r),n},mod:(t,e)=>(t%e+e)%e,bytesToString:t=>{if(t<1e3)return x("%.0f B",t);const e=t/1e3;if(e<100)return x("%.1f kB",e);if(e<1e3)return x("%.0f kB",e);const r=e/1e3;return x(r<100?"%.1f MB":"%.0f MB",r)},toFixedIfFloating:t=>{if(!t||Number.isNaN(Number(t)))return t;const e=Number(t);return e%1?e.toFixed(3):String(e)},floor:(t,e=0)=>{const r=Math.pow(10,e);return Math.floor(t*r)/r}});var O=Object.freeze({__proto__:null,addAll:function(t,e){for(const r of e)t.add(r)},isEqual:function(t,e){if(t===e)return!0;if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}});function C(t){if(null===t)throw new Error("Expected given value to not be null but it was: "+t)}var A=Object.freeze({__proto__:null,assertNotNull:C});const{ls:I}=w;export{y as ArrayUtilities,v as DateUtilities,e as MapUtilities,p as Multimap,N as NumberUtilities,O as SetUtilities,f as StringUtilities,A as TypeScriptUtilities,w as UIString,h as assertNever,C as assertNotNull,I as ls,g as runOnWindowLoad};
